<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>deepin上升级Python | My New Hugo Site</title>
<meta name="keywords" content="python, deepin, 升级" />
<meta name="description" content="1. 安装高版本的Python  这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负&hellip;
  去官网下载最新的Python 我这里下载的是源码，因为没有对应的安装包。（Python3.9） 下载完成后解压到本地 sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python  编译安装 cd /opt/python mv Python-3.9.5 python3.9 sudo ./configure --enable-optimizations # 默认安装到/usr/local/bin, 可用--prefix指定安装目录 make -j8 &amp;&amp; sudo make altinstall sudo make clean  验证安装成功 /usr/local/bin/python3.9  Python 3.9.5 (default, May 13 2021, 09:51:10) [GCC 6.3.0 20170516] on linux Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information. &gt;&gt;&gt; exit()   2. 设置默认Python版本 2.1 用户级修改 vim ~/.">
<meta name="author" content="李昌">
<link rel="canonical" href="http://lich-img.github.io/Mysite/posts/python/deepin%E4%B8%8A%E5%8D%87%E7%BA%A7python/" />
<link crossorigin="anonymous" href="/Mysite/assets/css/stylesheet.min.6f60056d44d3f7eb69a4bc6c332b59960f3a995802bded244750232f33713c49.css" integrity="sha256-b2AFbUTT9&#43;tppLxsMytZlg86mVgCve0kR1AjLzNxPEk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/Mysite/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://lich-img.github.io/Mysite/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://lich-img.github.io/Mysite/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://lich-img.github.io/Mysite/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://lich-img.github.io/Mysite/apple-touch-icon.png">
<link rel="mask-icon" href="http://lich-img.github.io/Mysite/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.81.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="deepin上升级Python" />
<meta property="og:description" content="1. 安装高版本的Python  这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负&hellip;
  去官网下载最新的Python 我这里下载的是源码，因为没有对应的安装包。（Python3.9） 下载完成后解压到本地 sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python  编译安装 cd /opt/python mv Python-3.9.5 python3.9 sudo ./configure --enable-optimizations # 默认安装到/usr/local/bin, 可用--prefix指定安装目录 make -j8 &amp;&amp; sudo make altinstall sudo make clean  验证安装成功 /usr/local/bin/python3.9  Python 3.9.5 (default, May 13 2021, 09:51:10) [GCC 6.3.0 20170516] on linux Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information. &gt;&gt;&gt; exit()   2. 设置默认Python版本 2.1 用户级修改 vim ~/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://lich-img.github.io/Mysite/posts/python/deepin%E4%B8%8A%E5%8D%87%E7%BA%A7python/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-13T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-05-13T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="deepin上升级Python"/>
<meta name="twitter:description" content="1. 安装高版本的Python  这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负&hellip;
  去官网下载最新的Python 我这里下载的是源码，因为没有对应的安装包。（Python3.9） 下载完成后解压到本地 sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python  编译安装 cd /opt/python mv Python-3.9.5 python3.9 sudo ./configure --enable-optimizations # 默认安装到/usr/local/bin, 可用--prefix指定安装目录 make -j8 &amp;&amp; sudo make altinstall sudo make clean  验证安装成功 /usr/local/bin/python3.9  Python 3.9.5 (default, May 13 2021, 09:51:10) [GCC 6.3.0 20170516] on linux Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information. &gt;&gt;&gt; exit()   2. 设置默认Python版本 2.1 用户级修改 vim ~/."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://lich-img.github.io/Mysite/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "deepin上升级Python",
      "item": "http://lich-img.github.io/Mysite/posts/python/deepin%E4%B8%8A%E5%8D%87%E7%BA%A7python/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "deepin上升级Python",
  "name": "deepin上升级Python",
  "description": "1. 安装高版本的Python  这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负\u0026hellip;\n  去官网下载最新的Python 我这里下载的是源码，因为没有对应的安装包。（Python3.9） 下载完成后解压到本地 sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python  编译安装 cd /opt/python mv Python-3.9.5 python3.9 sudo ./configure --enable-optimizations # 默认安装到/usr/local/bin, 可用--prefix指定安装目录 make -j8 \u0026amp;\u0026amp; sudo make altinstall sudo make clean  验证安装成功 /usr/local/bin/python3.9  Python 3.9.5 (default, May 13 2021, 09:51:10) [GCC 6.3.0 20170516] on linux Type \u0026quot;help\u0026quot;, \u0026quot;copyright\u0026quot;, \u0026quot;credits\u0026quot; or \u0026quot;license\u0026quot; for more information. \u0026gt;\u0026gt;\u0026gt; exit()   2. 设置默认Python版本 2.1 用户级修改 vim ~/.",
  "keywords": [
    "python", "deepin", "升级"
  ],
  "articleBody": "1. 安装高版本的Python  这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负…\n  去官网下载最新的Python 我这里下载的是源码，因为没有对应的安装包。（Python3.9） 下载完成后解压到本地 sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python  编译安装 cd /opt/python mv Python-3.9.5 python3.9 sudo ./configure --enable-optimizations # 默认安装到/usr/local/bin, 可用--prefix指定安装目录 make -j8 \u0026\u0026 sudo make altinstall sudo make clean  验证安装成功 /usr/local/bin/python3.9  Python 3.9.5 (default, May 13 2021, 09:51:10) [GCC 6.3.0 20170516] on linux Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.  exit()   2. 设置默认Python版本 2.1 用户级修改 vim ~/.bashrc 增加一行：alias python='/usr/local/bin/python3.9\nsource ~/.bashrc 2.2 系统级修改 sudo rm /usr/bin/python # 删除原来默认的Python软链接 sudo ln -s /usr/local/bin/python3.9 /usr/bin/python # 设置新的软连接 从python3.9指向python 2.3 基于update-alternatives 列出所有可用的python版本替代信息\nupdate-alternatives --list python 若出现update-alternatives: 错误: 无 python 的候选项，则说明update-alternatives没有添加Python的替代版本，需要手动添加\nsudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 1 sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.5 2 sudo update-alternatives --install /usr/bin/python python /usr/local/bin/python3.9 3 update-alternatives的--install参数后跟4个参数，分别是link name path priority， link is the generic name for the master link, name is the name of its symlink in the alternatives directory, and path is the alternative being introduced for the master link。最后一个是优先级，数字越高优先级越高 再次使用update-alternatives --list python查看可用的版本替代信息\n开始切换：\nupdate-alternatives --config python 有 3 个候选项可用于替换 python (提供 /usr/bin/python)。 选择 路径 优先级 状态 ------------------------------------------------------------ * 0 /usr/local/bin/python3.9 3 自动模式 1 /usr/bin/python2.7 1 手动模式 2 /usr/bin/python3.5 2 手动模式 3 /usr/local/bin/python3.9 3 手动模式 要维持当前值[*]请按，或者键入选择的编号： 输入3，选择Python3.9为默认值\n3. pip错误 更换版本后，pip可能会出现错误。 在我的电脑上出现了subprocess.CalledProcessError: Command '('lsb_release', '-a')' returned non-zero exit status 1.错误， 解决方法为：删除/usr/bin/lsb_release\nsudo rm /usr/bin/lsb_release ",
  "wordCount" : "203",
  "inLanguage": "en",
  "datePublished": "2021-05-13T00:00:00Z",
  "dateModified": "2021-05-13T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "李昌"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://lich-img.github.io/Mysite/posts/python/deepin%E4%B8%8A%E5%8D%87%E7%BA%A7python/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My New Hugo Site",
    "logo": {
      "@type": "ImageObject",
      "url": "http://lich-img.github.io/Mysite/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://lich-img.github.io/Mysite/" accesskey="h" title="My New Hugo Site (Alt + H)">My New Hugo Site</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      deepin上升级Python
    </h1>
    <div class="post-meta"><span title='2021-05-13 00:00:00 +0000 UTC'>May 13, 2021</span>&nbsp;·&nbsp;李昌

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-%e5%ae%89%e8%a3%85%e9%ab%98%e7%89%88%e6%9c%ac%e7%9a%84python" aria-label="1. 安装高版本的Python">1. 安装高版本的Python</a></li>
                <li>
                    <a href="#2-%e8%ae%be%e7%bd%ae%e9%bb%98%e8%ae%a4python%e7%89%88%e6%9c%ac" aria-label="2. 设置默认Python版本">2. 设置默认Python版本</a><ul>
                        
                <li>
                    <a href="#21-%e7%94%a8%e6%88%b7%e7%ba%a7%e4%bf%ae%e6%94%b9" aria-label="2.1 用户级修改">2.1 用户级修改</a></li>
                <li>
                    <a href="#22-%e7%b3%bb%e7%bb%9f%e7%ba%a7%e4%bf%ae%e6%94%b9" aria-label="2.2 系统级修改">2.2 系统级修改</a></li>
                <li>
                    <a href="#23-%e5%9f%ba%e4%ba%8eupdate-alternatives" aria-label="2.3 基于update-alternatives">2.3 基于update-alternatives</a></li></ul>
                </li>
                <li>
                    <a href="#3-pip%e9%94%99%e8%af%af" aria-label="3. pip错误">3. pip错误</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="1-安装高版本的python">1. 安装高版本的Python<a hidden class="anchor" aria-hidden="true" href="#1-安装高版本的python">#</a></h2>
<blockquote>
<p>这里要说明，不能删除原来的python2以及python3.5，因为系统是依赖于这两个python版本的，当然你也可以试试，后果自负&hellip;</p>
</blockquote>
<ol>
<li>去官网下载最新的Python
我这里下载的是源码，因为没有对应的安装包。（<a href="https://www.python.org/ftp/python/3.9.5/Python-3.9.5.tar.xz">Python3.9</a>）</li>
<li>下载完成后解压到本地
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo tar -xvf Python-3.9.5.tar.xz -C /opt/python
</code></pre></div></li>
<li>编译安装
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cd /opt/python
mv Python-3.9.5 python3.9
sudo ./configure --enable-optimizations  <span style="color:#75715e"># 默认安装到/usr/local/bin, 可用--prefix指定安装目录</span>
make -j8 <span style="color:#f92672">&amp;&amp;</span> sudo make altinstall
sudo make clean
</code></pre></div></li>
<li>验证安装成功
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"> /usr/local/bin/python3.9
</code></pre></div><pre><code>    Python 3.9.5 (default, May 13 2021, 09:51:10) 
 [GCC 6.3.0 20170516] on linux
 Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
 &gt;&gt;&gt; exit()
</code></pre></li>
</ol>
<h2 id="2-设置默认python版本">2. 设置默认Python版本<a hidden class="anchor" aria-hidden="true" href="#2-设置默认python版本">#</a></h2>
<h3 id="21-用户级修改">2.1 用户级修改<a hidden class="anchor" aria-hidden="true" href="#21-用户级修改">#</a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim ~/.bashrc
</code></pre></div><p>增加一行：<code>alias python='/usr/local/bin/python3.9</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">source ~/.bashrc
</code></pre></div><h3 id="22-系统级修改">2.2 系统级修改<a hidden class="anchor" aria-hidden="true" href="#22-系统级修改">#</a></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo rm /usr/bin/python   <span style="color:#75715e"># 删除原来默认的Python软链接</span>
sudo ln -s /usr/local/bin/python3.9 /usr/bin/python  <span style="color:#75715e"># 设置新的软连接 从python3.9指向python</span>
</code></pre></div><h3 id="23-基于update-alternatives">2.3 基于update-alternatives<a hidden class="anchor" aria-hidden="true" href="#23-基于update-alternatives">#</a></h3>
<p>列出所有可用的python版本替代信息</p>
<pre><code>update-alternatives --list python
</code></pre><p>若出现<code>update-alternatives: 错误: 无 python 的候选项</code>，则说明update-alternatives没有添加Python的替代版本，需要手动添加</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo update-alternatives --install /usr/bin/python python /usr/bin/python2.7 <span style="color:#ae81ff">1</span>

sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.5 <span style="color:#ae81ff">2</span>

sudo update-alternatives --install /usr/bin/python python /usr/local/bin/python3.9 <span style="color:#ae81ff">3</span>
</code></pre></div><p><code>update-alternatives</code>的<code>--install</code>参数后跟4个参数，分别是<code>link name path priority</code>， <code>link</code> is the generic name for the master link, <code>name</code> is the name of its symlink in the alternatives directory, and <code>path</code> is the alternative being introduced for the master link。最后一个是优先级，数字越高优先级越高
再次使用<code>update-alternatives --list python</code>查看可用的版本替代信息</p>
<p>开始切换：</p>
<pre><code>update-alternatives --config python
</code></pre><pre><code>有 3 个候选项可用于替换 python (提供 /usr/bin/python)。

  选择       路径                    优先级  状态
------------------------------------------------------------
* 0            /usr/local/bin/python3.9   3         自动模式
  1            /usr/bin/python2.7         1         手动模式
  2            /usr/bin/python3.5         2         手动模式
  3            /usr/local/bin/python3.9   3         手动模式

要维持当前值[*]请按&lt;回车键&gt;，或者键入选择的编号：
</code></pre><p>输入3，选择Python3.9为默认值</p>
<h2 id="3-pip错误">3. pip错误<a hidden class="anchor" aria-hidden="true" href="#3-pip错误">#</a></h2>
<p>更换版本后，pip可能会出现错误。
在我的电脑上出现了<code>subprocess.CalledProcessError: Command '('lsb_release', '-a')' returned non-zero exit status 1.</code>错误，
解决方法为：删除<code>/usr/bin/lsb_release</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo rm /usr/bin/lsb_release
</code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://lich-img.github.io/Mysite/tags/python/">Python</a></li>
      <li><a href="http://lich-img.github.io/Mysite/tags/deepin/">deepin</a></li>
      <li><a href="http://lich-img.github.io/Mysite/tags/%E5%8D%87%E7%BA%A7/">升级</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="http://lich-img.github.io/Mysite/">My New Hugo Site</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
